<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Secular+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    

    <nav class="navbar navbar-fixed-top navbar-expand-lg navbar-light bg-light  orange-text">
        <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
          <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                  <a class="nav-link" href="/">Home</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="//codeply.com">Codeply</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="#">Link</a>
              </li>
          </ul>
      </div>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
        <span class="navbar-toggler-icon"></span>
      </button>
        <div class="mx-auto order-0">
          <a class="navbar-brand mx-auto" href="#">Pizza Dog</a>
        </div>
                <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
          <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                  <a class="nav-link" href="/login">Login</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/register">Register</a>
              </li>
              <li class="nav-item">
                <a href="/basket" class="nav-link"><img src="img/basket.png" width="27px"> <span class="badge badge-secondary" style="background-color: orange;">0</span></a>
            </li>
          </ul>
      </div>
      </nav>
</head>
<body>
  <!-- bootstrap carousel -->
  <div id="carouselExampleIndicators" class="carousel slide top-content" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="img/testpizza.jpg" alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="img/testpizza.jpg" alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="img/testpizza.jpg" alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
    <div class="container orange-button">
        <div class="row">
            <div class="col-md-12">
                <h1 class="text-center">Pizza Dog <%=message%></h1>
                <p class="text-center">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit.
                    Quisquam, quidem.
                </p>
            </div>
        </div>
        <div class="row">
          <div class="col-md-12">
              <h2>Nos Entrées</h2>
          </div>
        </div>
        <div class="row">
          <% for(var i=0; i<starterName.length; i++) {%>
            <div class="col-md-4">
              <div class="card pizzaMargin">
                  <img src="img/salade1.jpg" class="card-img-top" alt="...">
                  <div class="card-body">
                      <h5 class="card-title"><%=starterName[i].name%></h5>
                      <p class="card-text"><%=starterName[i].description%></p>
                      <p class="card-text">10$</p>
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#pizzaBox<%=starterName[i].starter_id%>">
                          Commannder
                      </button>     
                  </div>
              </div>
          </div>
          <div class="modal fade" id="pizzaBox<%=starterName[i].starter_id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle"><%=starterName[i].name%></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <img src="img/pizza1.png" alt="..." class="img-thumbnail">
                </div>
                <div class="modal-footer">
                    <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Taille</option>
                        <option value="1">M</option>
                        <option value="2">L</option>
                        <option value="3">XL</option>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Nombre</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                      </select>
                  <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">ajouter au panier</button>
                  <button type="button" class="btn btn-primary ">commander</button>
                </div>
              </div>
            </div>
          </div>
          <% } %>
        </div>
        <div class="row">
            <div class="col-md-12">
                <h2>Nos Pizzas</h2>
            </div>
        </div>
        <div class="row">
            <% for(var i=0; i<pizzaName.length; i++) {%>
              <div class="col-md-4">
                <div class="card pizzaMargin">
                    <img src="img/pizza1.png" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title"><%=pizzaName[i].name%></h5>
                        <p class="card-text"><%=pizzaName[i].description%></p>
                        <p class="card-text">10$</p>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#pizzaBox<%=pizzaName[i].pizza_id%>">
                            Commannder
                        </button>     
                    </div>
                </div>
            </div>
            <div class="modal fade" id="pizzaBox<%=pizzaName[i].pizza_id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle"><%=pizzaName[i].name%></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                      <img src="img/pizza1.png" alt="..." class="img-thumbnail">
                  </div>
                  <div class="modal-footer">
                      <select class="custom-select" id="inputGroupSelect01">
                          <option selected>Taille</option>
                          <option value="1">M</option>
                          <option value="2">L</option>
                          <option value="3">XL</option>
                        </select>
                        <select class="custom-select" id="inputGroupSelect01">
                          <option selected>Nombre</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                        </select>
                    <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal"id="<%=pizzaName[i].name%>" onclick="AddBasket('<%=pizzaName[i].name%>','taille<%=i%>','nombre<%=i%>')"> ajouter au panier</button>
                    <button type="button" class="btn btn-primary ">commander</button>
                  </div>
                </div>
              </div>
            </div>
            <% } %>
          </div>
          <div class="row">
            <div class="col-md-12 text-center">
                <h2>Menu personnalisée</h2>
            </div>
          </div>
          <div class="row justify-content-center">
              <div class="col-md-5">
                <div class="card pizzaMargin">
                    <img src="img/pizzaPerso.png" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Pizza perso</h5>
                        <p class="card-text">Creez votre pizza</p>
                        <p class="card-text">10-20$</p>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#pizzaBoxP">
                            Commannder
                        </button>     
                    </div>
                </div>
            </div>
            <div class="modal fade" id="pizzaBoxP" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Pizza Perso</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body sliderPizza">
                      <img src="img/pizzaPerso.png" alt="..." class="img-thumbnail">
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Entrée</option>
                        <% for(var i=0; i<starterName.length; i++) {%>
                          <option value="<%=starterName[i].starter_id%>"><%=starterName[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Boisson</option>
                        <% for(var i=0; i<boissonName.length; i++) {%>
                          <option value="<%=boissonName[i].boisson_id%>"><%=boissonName[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Taille</option>
                        <option value="1">M</option>
                        <option value="2">L</option>
                        <option value="3">XL</option>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 1</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 2</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 3</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 4</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 5</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Toping 6</option>
                        <% for(var i=0; i<toppingPizz.length; i++) {%>
                          <option value="<%=toppingPizz[i].topping_id%>"><%=toppingPizz[i].name%></option>
                        <% } %>
                      </select>
                      <select class="custom-select" id="inputGroupSelect01">
                        <option selected>Nombre</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                      </select>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">ajouter au panier</button>
                    <button type="button" class="btn btn-primary ">commander</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <script>
            let basketNUM = document.querySelector('#basketNUM');
            basketNUM.innerHTML = ((getCookie("name")).split(",").length/2).toString();
            let amount;
            function AddBasket(a,b,c) {
              let cookie = getCookie("name");
              if(cookie != null){
                let amount = (cookie.split(",")).length;
                console.log(amount);
              }
              selectElement = document.querySelector('#'+b);
              TaillePizza = selectElement.options[selectElement.selectedIndex].value;
              selectElement = document.querySelector('#'+c);
              Qtepizza = selectElement.options[selectElement.selectedIndex].value;
              //console.log(a+" ajouté au panier "+"Taille "+TaillePizza+" Qté "+Qtepizza);
              //create double dimension array
              let tab = new Array(2);
              tab[0] = new Array();
              tab[1] = new Array();
              if(cookie != null){
                console.log(amount);
                for(let i = 0;i<(getCookie("name")).split(",").length;i = i+2){
                  tab[0].push(cookie.split(",")[i]);
                  tab[1].push(cookie.split(",")[i+1]);
                }
              }
              tab[0].push(a);
              tab[1].push('1');
              //console.log(tab);
              document.cookie = "name="+tab+"";
              //change value of basketNUM on html
              let basketNUM = document.querySelector('#basketNUM');
              basketNUM.innerHTML = ((getCookie("name")).split(",").length/2).toString();
            }
            </script>

</body>
    